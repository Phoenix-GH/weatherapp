<template>
    <div class="bg-clouds">
        <section class="module-progress-bar">
            <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100" style="width: 38%;">
                    <span class="sr-only">38% Complete</span>
                </div>
            </div>
        </section>
        <section class="module-onboarding container">
            <div class="onboarding wrapper">
                <h2 class="p-b-30">Importing your properties and Checking your properties against
                    existing weather data...</h2>
                <div class="p-b-100">
                    <svg class="circular-loader" width="74px" height="77px" viewBox="0 0 74 77" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="Working" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="Onboard---Import" transform="translate(-540.000000, -296.000000)" fill="#79BFE8" fill-rule="nonzero">
                                <g id="spinner-of-dots" transform="translate(540.000000, 296.000000)">
                                    <path d="M17.0003405,55 C15.0554799,55 13.4027825,55.6804149 12.0415673,57.0412446 C10.680863,58.403266 10,60.0553617 10,61.9999149 C10,63.9446383 10.6803522,65.596734 12.0415673,66.9587554 C13.4032933,68.3195851 15.0559907,69 17.0003405,69 C18.9125116,69 20.5568663,68.3195851 21.9344262,66.9587554 C23.3114754,65.5984363 24,63.9446383 24,61.9999149 C24,60.0553617 23.3116457,58.4044576 21.9344262,57.0412446 C20.556696,55.6816065 18.9125116,55 17.0003405,55 Z" id="Shape"></path>
                                    <path d="M15,39.5004104 C15,37.4380233 14.2659501,35.6729601 12.7970294,34.2029223 C11.3282729,32.734198 9.56235019,32 7.49991791,32 C5.43732145,32 3.67172707,32.7343622 2.20280639,34.2029223 C0.734214069,35.6718109 0,37.4373666 0,39.5004104 C0,41.5624692 0.734049889,43.3272041 2.20280639,44.7964209 C3.67172707,46.2656378 5.43732145,47 7.49991791,47 C9.56235019,47 11.3282729,46.2656378 12.7970294,44.7964209 C14.2659501,43.3281891 15,41.5624692 15,39.5004104 Z" id="Shape"></path>
                                    <path d="M60,23 C61.09898,23 62.0421136,22.6077573 62.8243225,21.8248479 C63.6075822,21.041238 64,20.0993302 64,18.9996498 C64,17.899444 63.6075822,16.9582367 62.8243225,16.1751521 C62.0415882,15.3915423 61.09898,15 60,15 C58.8997942,15 57.9577113,15.3922427 57.1744517,16.1751521 C56.3917174,16.9584118 56,17.899444 56,18.9996498 C56,20.0998555 56.3917174,21.041238 57.1744517,21.8248479 C57.9577113,22.6084577 58.8997942,23 60,23 Z" id="Shape"></path>
                                    <path d="M16.5003383,10 C14.1495552,10 12.145376,10.829194 10.4871241,12.4870746 C8.82870306,14.1449552 8,16.1492637 8,18.4994925 C8,20.8505672 8.82870306,22.8540299 10.4871241,24.5125871 C12.1458835,26.1709751 14.1500627,27 16.5003383,27 C18.8506139,27 20.8549623,26.1704677 22.5128759,24.5125871 C24.1707895,22.8540299 25,20.8500597 25,18.4994925 C25,16.1492637 24.1707895,14.1449552 22.5128759,12.4870746 C20.8549623,10.829194 18.8506139,10 16.5003383,10 Z" id="Shape"></path>
                                    <path d="M72.6877292,36.3121477 C71.8127726,35.4370542 70.750114,35 69.5002463,35 C68.2492291,35 67.1865706,35.4370542 66.3116139,36.3121477 C65.4371499,37.1872412 65,38.2499954 65,39.5007388 C65,40.7501687 65.4371499,41.8144006 66.3116139,42.6875239 C67.1870632,43.5629458 68.2492291,44 69.5002463,44 C70.750114,44 71.8134294,43.5629458 72.6877292,42.6875239 C73.5633428,41.8134155 74,40.7501687 74,39.5007388 C74,38.2506522 73.5639996,37.1877337 72.6877292,36.3121477 Z" id="Shape"></path>
                                    <path d="M60.500258,56 C58.9934487,56 57.7004237,56.5397064 56.6198071,57.620323 C55.5403943,58.6997358 55,59.9934487 55,61.500258 C55,63.0058633 55.5403943,64.2995763 56.6198071,65.3803649 C57.7004237,66.4608096 58.9936207,67 60.500258,67 C62.0058633,67 63.2988883,66.4597777 64.379505,65.3803649 C65.4601216,64.2997483 66,63.0065513 66,61.500258 C66,59.9934487 65.4601216,58.7011117 64.379505,57.620323 C63.2990603,56.5395344 62.0058633,56 60.500258,56 Z" id="Shape"></path>
                                    <path d="M38.0002463,65 C36.3441001,65 34.9299405,65.5870234 33.7574389,66.7589363 C32.5860866,67.9308491 32,69.3440719 32,71.0002462 C32,72.6564206 32.5854299,74.0698075 33.7574389,75.2415562 C34.9299405,76.413469 36.3434435,77 38.0002463,77 C39.6565565,77 41.0700595,76.413469 42.2420685,75.2415562 C43.4140776,74.0698075 44,72.6564206 44,71.0002462 C44,69.3440719 43.4140776,67.9308491 42.2420685,66.7589363 C41.0700595,65.5870234 39.6565565,65 38.0002463,65 Z" id="Shape"></path>
                                    <path d="M38.0005746,0 C35.5008711,0 33.3748506,0.874608922 31.6246477,2.62464769 C29.8749373,4.37485064 29,6.50037854 29,9.00024628 C29,11.5002782 29.8746089,13.624821 31.6246477,15.3751881 C33.3748506,17.1248985 35.5003785,18 38.0005746,18 C40.5014275,18 42.6259703,17.1253911 44.3755165,15.3751881 C46.1250627,13.6256419 47,11.5002782 47,9.00024628 C47,6.50054272 46.1250627,4.37550737 44.3755165,2.62464769 C42.6259703,0.875101475 40.5014275,0 38.0005746,0 Z" id="Shape"></path>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>
            </div>
        </section>
    </div>
</template>
<script>
    export default {
        props: [''],
        mounted() {
            this.loadData()
            setInterval(function () {
                this.loadData();
            }.bind(this), 9000);
        },
        data () {
            return {
                importing: 1,
            };
        },
        watch: {
            'importing' : function (val) {
                if(val === 0 || val === null){
                    window.location.href = '/onboard/notification_settings';
                }
            }
            
        },
        methods: {
            loadData () {
                $.get('/onboard/get_import_status', function (response) {
                    this.importing = response.importing;
                }.bind(this));
            },
        }
    }
</script>


